<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

		<menuitem id="menu_pawn_for_sale" name="Sales and Interest"
			groups="group_pawn_manager,group_pawn_stock,group_pawn_accountant,group_pawn_officer"
		    parent="menu_pawn_root" sequence="2" />

		<menuitem id="menu_pawn_stock" name="Stock"
			groups="group_pawn_manager,group_pawn_stock,group_pawn_accountant,group_pawn_officer"
		    parent="menu_pawn_root" sequence="3" />

		<menuitem id="menu_pawn_cash" name="Cash"
			groups="group_pawn_manager,group_pawn_stock,group_pawn_accountant,group_pawn_officer"
		    parent="menu_pawn_root" sequence="4" />

		<!-- Master Data -->
        <menuitem id="menu_pawn_master" name="Master Data"
            groups="group_pawn_accountant,group_pawn_officer"
            parent="menu_pawn_root" sequence="100"/>

        <!-- Link to Pawn Customer -->
        <record id="action_pawn_customer_form" model="ir.actions.act_window">
            <field name="name">Customers</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('supplier','=',1), ('pawnshop','=',1)]</field>
            <field name="context">{'default_supplier':1, 'default_customer':0, 'default_pawnshop':1}</field>
            <field name="filter" eval="True"/>
        </record>
        <record id="action_pawn_customer_form_view1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="res_partner_kanban_view"/>
            <field name="act_window_id" ref="action_pawn_customer_form"/>
        </record>
        <record id="action_pawn_customer_form_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_partner_form"/>
            <field name="act_window_id" ref="action_pawn_customer_form"/>
        </record>
        <record id="action_pawn_customer_tree_view1" model="ir.actions.act_window.view">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_partner_tree"/>
            <field name="act_window_id" ref="action_pawn_customer_form"/>
        </record>
        <menuitem id="menu_pawn_customer" name="Customers"
			groups="group_pawn_accountant,group_pawn_manager,group_pawn_officer"
	        parent="menu_pawn_master"
	        action="action_pawn_customer_form" sequence="60"/>

        <!-- Link to Buyer -->
        <record id="action_pawn_buyer_form" model="ir.actions.act_window">
            <field name="name">Buyer</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('customer','=',1), ('pawnshop','=',1)]</field>
            <field name="context">{'default_customer':1, 'default_supplier':0, 'default_pawnshop':1,}</field>
            <field name="filter" eval="True"/>
        </record>
        <record id="action_pawn_buyer_form_view1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="res_partner_kanban_view"/>
            <field name="act_window_id" ref="action_pawn_buyer_form"/>
        </record>
        <record id="action_pawn_buyer_form_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_partner_form"/>
            <field name="act_window_id" ref="action_pawn_buyer_form"/>
        </record>
        <record id="action_pawn_buyer_tree_view1" model="ir.actions.act_window.view">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_partner_tree"/>
            <field name="act_window_id" ref="action_pawn_buyer_form"/>
        </record>
	    <menuitem id="menu_normal_customer" name="Buyer"
			groups="group_pawn_accountant,group_pawn_manager,group_pawn_officer"
	        parent="menu_pawn_master"
	        action="action_pawn_buyer_form" sequence="65"/>

	    <!-- Pawn Item -->
        <record id="pawn_item_search_form_view" model="ir.ui.view">
            <field name="name">pawn.item.search.form</field>
            <field name="model">product.product</field>
            <field name="arch" type="xml">
                <search string="Pawn Item">
                   <field name="name" string="Pawn Item" filter_domain="['|',('name','ilike',self),('default_code','ilike',self)]"/>
                   <field name="item_description" string="Description" filter_domain="[('item_description','ilike',self)]"/>
                   <field name="categ_id"/>
                   <group  expand='0' string='Group by...'>
                       <filter string='Shop' domain="[]" context="{'group_by' : 'pawn_shop_id'}"/>
                       <filter string='Journal' domain="[]" context="{'group_by' : 'journal_id'}"/>
                       <filter string='Category' domain="[]" context="{'group_by' : 'categ_id'}"/>
                       <filter string='Status' domain="[]" context="{'group_by' : 'state'}"/>
                       <filter string='Location' domain="[]" context="{'group_by' : 'location_status'}"/>
                       <filter string='Pawn Date' domain="[]" context="{'group_by' : 'date_order'}"/>
                       <filter string='Grace Period End Date' domain="[]" context="{'group_by' : 'date_due'}"/>
                       <filter string='Number of Items' domain="[]" context="{'group_by' : 'product_qty_total'}"/>
                       <filter string='Date Sold' domain="[]" context="{'group_by' : 'date_sold'}"/>
                   </group>
                </search>
            </field>
        </record>

        <record id="pawn_item_tree_view" model="ir.ui.view">
            <field name="name">pawn.item.tree</field>
            <field name="model">product.product</field>
            <field eval="7" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Pawn Items" create="0">
                    <field name="pawn_shop_id" />
                    <field name="journal_id" />
                    <field name="name"/>
					<field name="partner_customer_id"/>
                    <field name="item_description"/>
                    <field name="categ_id"/>
                    <field name="date_order"/>
                    <field name="date_due"/>
                    <field name="product_qty" invisible="context.get('tree_view_type', False) in ['pawn_asset']"/>
                    <field name="uom_id" string="Unit of Measure" invisible="context.get('tree_view_type', False) in ['pawn_asset']"/>
                    <!--field name="price_pawned" string="Pawned Price" invisible="context.get('tree_view_type', False) not in ['pawn_asset']"/-->
                    <field name="price_estimated" string="Estimated Price"/>
                    <field name="price_pawned" string="Pawned Price"/>
                    <field name="state"/>
                    <field name="extended_x"/>
                    <field name="location_status" string="Location" />
                </tree>
            </field>
        </record>

        <record id="pawn_item_sold_tree_view" model="ir.ui.view">
            <field name="name">pawn.item.sold.tree</field>
            <field name="model">product.product</field>
            <field eval="7" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Pawn Items Sold" create="0">
                    <field name="pawn_shop_id" invisible="1"/>
                    <field name="name"/>
					<field name="partner_customer_id"/>
                    <field name="item_description" invisible="1"/>
                    <field name="categ_id"/>
                    <field name="date_order"/>
                    <field name="date_due"/>
                    <field name="product_qty" />
                    <field name="uom_id" string="Unit of Measure" />
                    <field name="total_price_estimated" sum="Total Estimated Price" />
                    <field name="total_price_pawned" sum="Total Pawned Price" />
                    <field name="total_price_sold" sum="Total Sold Price"/>
                    <field name="total_profit" sum="Total Profit"/>
                    <field name="date_sold" string="Date Sold" />
                    <field name="state" invisible="1"/>
                    <field name="extended" invisible="1"/>
                    <field name="location_status" string="Location" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="pawn_item_normal_form_view" model="ir.ui.view">
            <field name="name">pawn.item.normal.form</field>
            <field name="model">product.product</field>
            <field eval="7" name="priority"/>
            <field name="arch" type="xml">
                <form string="Pawn Item" create="0" edit="0" version="7.0">
	                <header>
                    	<button name="action_asset_sale" string="For Sales" type="object" class="oe_highlight"
                    			attrs="{'invisible': ['|', '|', ('extended', '=', True), ('state', 'not in', ('expire')), ('type', '!=', 'pawn_asset')]}" />
                    	<button name="%(action_asset_for_sale)d" string="For Sales" type="action" class="oe_highlight"
                    			attrs="{'invisible': ['|', '|', ('extended', '=', False), ('state', '!=', ('expire')), ('type', '!=', 'pawn_asset')]}" />
                    	<button name="action_asset_sale_backto_expire" string="Back to Expire" type="object" class="oe_highlight"
                    			attrs="{'invisible': ['|', '|', ('extended', '=', True), ('state', 'not in', ('for_sale')), ('type', '!=', 'pawn_asset')]}" />
                    	<button name="%(action_item_split)d" string="Split Item" type="action" class="oe_highlight"
                    			attrs="{'invisible': ['|', '|', ('type', '=', 'pawn_asset'), ('product_qty','&lt;',2), ('state','!=','for_sale')]}" />
                    	<field name="state" widget="statusbar" statusbar_visible="draft,pawn,expire,for_sale" readonly="1" />
	                </header>
                    <sheet>
                        <field name="image_medium" widget="image" class="oe_avatar oe_left"/>
                        <div class="oe_title">
                            <div class="oe_edit_only">
                                <label for="name" string="Item Name"/>
                            </div>
                            <h1>
                                <field name="name"/>
                            </h1>
                            <label for="categ_id" class="oe_edit_only"/>
                            <h2><field name="categ_id"/></h2>
                        </div>
                        <div class="oe_right oe_button_box" name="buttons">
                        	<h1>
								<field name="extended" invisible="1"/>
	 							<div style="color:red">
	 								<label string="Extended" attrs="{'invisible': [('extended', '!=', True)]}"/>
								</div>
							</h1>
						</div>
						<group>
	                        <group>
								<field name="partner_customer_id"/>
	                            <field name="item_description" nolable="1"/>
	                            <field name="active"/>
	                        </group>
	                        <group>
	            				<field name="pawn_shop_id" />
	            				<field name="location_status" />
	            				<field name="date_sold" string="Date Sold" />
	                        </group>
                        </group>
                        <notebook>
                            <page string="Information">
                                <group>
                                    <group>
                                        <field name="type"/>
                    					<field name="product_qty"/>
                                        <field name="uom_id"/>
                                        <field name="price_pawned" string="Pawned Price"/>
                                    </group>
                                    <group>
                        				<field name="parent_id" attrs="{'invisible': [('parent_id','=',False)]}"/>
                        				<field name="order_id" attrs="{'invisible': [('order_id','=',False)]}"/>
                        				<field name="date_order" attrs="{'invisible': [('order_id','=',False)]}"/>
                        				<field name="date_due" attrs="{'invisible': [('order_id','=',False)]}"/>
										<!--label for="ean13"/>
                                        <div name="ean">
                                            <field name="ean13" placeholder="e.g. 5901234123457"/>
                                        </div-->
                                        <field name="price_estimated" string="Estimated Price"/>
                                    </group>
                                </group>
	                            <field name="line_ids" attrs="{'invisible': [('parent_id', '!=', False)]}">
	                                <tree string="Item Detail" editable="bottom">
	                                    <field name="item_id"/>
	                                    <field name="description"/>
	                                    <field name="categ_id"/>
	                                    <field name="product_qty" sum="Total Quantity"/>
                                        <field name="carat"/>
                                        <field name="gram"/>
	                                    <field name="uom_id" />
	                                    <field name="price_pawned"/>
	                                </tree>
	                            </field>
	                        	<field name="product_qty_total" invisible="1"/>
	                        	<field name="description" placeholder="describe the item characteristics..."/>
                            </page>
	                        <page string="Accounting">
	                            <group>
	                                <group>
	                                	<field name="property_account_pawn_asset"/>
	                                	<field name="property_account_revenue_reposessed_asset"/>
	                                	<field name="property_account_refund_reposessed_asset"/>
	                                </group>
	                                <group>
	                                	<field name="property_account_expire_asset"/>
	                                	<field name="property_account_cost_reposessed_asset"/>
	                                </group>
	                            </group>
	                        </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="pawn_items_kanban_view">
            <field name="name">Pawn Items Kanban</field>
            <field name="model">product.product</field>
            <field name="arch" type="xml">
                <kanban>
                    <field name="color"/>
                    <field name="type"/>
                    <field name="image_small"/>
                    <field name="price_pawned"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_vignette oe_semantic_html_override">
                                <a type="open"><img t-att-src="kanban_image('product.product', 'image_small', record.id.value)" class="oe_kanban_image"/></a>
                                <div class="oe_kanban_details">
                                    <h4>
                                        <a type="open">
                                             <field name="name"/>
                                        </a>
                                    </h4>
	                                <div>
	                                    <field name="item_description"/><br/>
	                                </div>
                                	<div name="tags"/>
                                    <ul>
                                        <li>Price: <field name="price_estimated"></field></li>
                                    </ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="action_pawn_assets" model="ir.actions.act_window">
            <field name="name">Pawn Tickets</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{'tree_view_type': 'pawn_asset', 'hide_action_model': ['pawn.asset.to.for.sale', 'pawn.item.to.borrowed', 'pawn.item.to.for.sale', 'pawn.item.create.receipt']}</field>
            <field name="domain">[('type','=','pawn_asset'), ('sale_ok','=',True)]</field>
            <field name="view_id" ref="pawn_item_tree_view"/>
            <field name="search_view_id" ref="pawn_item_search_form_view"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to define a new Pawn Item.
              </p>
            </field>
        </record>

        <record id="action_pawn_assets_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="pawn_item_tree_view"/>
            <field name="act_window_id" ref="action_pawn_assets"/>
        </record>
        <record id="action_pawn_assets_view2" model="ir.actions.act_window.view" >
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="pawn_item_normal_form_view"/>
            <field name="act_window_id" ref="action_pawn_assets"/>
        </record>
		<menuitem name="Pawn Ticket View" id="menu_pawn_assets_action_form" action="action_pawn_assets" sequence="20"
			groups="group_pawn_accountant,group_pawn_manager,group_pawn_stock"
		    parent="menu_pawn_stock"/>

        <record id="action_pawn_items" model="ir.actions.act_window">
            <field name="name">Pawn Items</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{'tree_view_type': 'pawn_item', 'hide_action_model': ['pawn.asset.to.for.sale', 'pawn.item.to.borrowed', 'pawn.item.to.for.sale', 'pawn.item.create.receipt']}</field>
            <field name="domain">[('type','=','consu'), ('sale_ok','=',True)]</field>
            <field name="view_id" ref="pawn_item_tree_view"/>
            <field name="search_view_id" ref="pawn_item_search_form_view"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to define a new Pawn Item.
              </p>
            </field>
        </record>
        <record id="action_pawn_items_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="pawn_item_tree_view"/>
            <field name="act_window_id" ref="action_pawn_items"/>
        </record>
        <record id="action_pawn_items_view2" model="ir.actions.act_window.view" >
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="pawn_item_normal_form_view"/>
            <field name="act_window_id" ref="action_pawn_items"/>
        </record>
		<menuitem name="Pawn Item View" id="menu_pawn_items_action_form" action="action_pawn_items" sequence="30"
			groups="group_pawn_accountant,group_pawn_manager,group_pawn_stock"
		    parent="menu_pawn_stock"/>

		<!-- Expenses -->
        <record id="action_product_expense" model="ir.actions.act_window">
            <field name="name">Expenses</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="view_type">form</field>
            <field name="context">{'default_hr_expense_ok': True, 'default_sale_ok': False}</field>
            <field name="domain">[('hr_expense_ok','=',True)]</field>
            <field name="view_id" ref="product.product_product_tree_view"/>
            <field name="search_view_id" ref="product.product_search_form_view"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to define a new expense product.
              </p>
            </field>
        </record>
        <menuitem action="action_product_expense" id="menu_product_expense"
        	groups="group_pawn_accountant"
        	parent="menu_pawn_master" sequence="70"/>

		<!-- Item Categories -->
        <record id="action_item_category" model="ir.actions.act_window">
            <field name="name">Item Categories</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.category</field>
            <field name="view_type">form</field>
            <field name="search_view_id" ref="product.product_category_search_view"/>
            <field name="view_id" ref="product.product_category_list_view"/>
        </record>
		<menuitem name="Items Categories" id="menu_item_category_action_form" action="action_item_category" sequence="100"
		    parent="menu_pawn_master" groups="group_pawn_accountant" />

        <record id="view_category_property_form_ext" model="ir.ui.view">
            <field name="name">view.category.property.form.ext</field>
            <field name="model">product.category</field>
            <field name="inherit_id" ref="product.product_category_form_view"/>
            <field name="arch" type="xml">
                <data>
                	<xpath expr="/form/sheet/group/group/field[@name='type']" position="after">
	                	<field name="uom_ids" widget="many2many_tags"/>
	                	<field name="is_jewelry" />
	                </xpath>
                    <xpath expr="/form/sheet" position="inside">
	 					<notebook>
	 						<page string="Property Selection">
	 							<group colspan="4">
									<field name="property_line_ids" widget="one2many_list" colspan="4" nolabel="1" >
										<tree string="Property Selection" editable="bottom">
			                                <field name="property_id"/>
			                                <field name="active"/>
			                            </tree>
			                        </field>
		                        </group>
			            	</page>
			            </notebook>
                    </xpath>
                </data>
            </field>
        </record>


        <!-- Item for Sales -->
        <record id="action_pawn_items_for_sale" model="ir.actions.act_window">
            <field name="name">Items For Sales</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{'tree_view_type': 'pawn_item', 'hide_action_model': ['pawn.asset.to.for.sale', 'pawn.item.to.for.sale'], }</field>
            <field name="domain">[('type','=','consu'), ('state','=','for_sale'), ('location_status.code','=','item_for_sale')]</field>
            <field name="view_id" ref="pawn_item_tree_view"/>
            <field name="search_view_id" ref="pawn_item_search_form_view"/>
        </record>
        <record id="action_pawn_items_for_sale_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="pawn_item_tree_view"/>
            <field name="act_window_id" ref="action_pawn_items_for_sale"/>
        </record>
        <record id="action_pawn_items_for_sale_view2" model="ir.actions.act_window.view" >
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="pawn_item_normal_form_view"/>
            <field name="act_window_id" ref="action_pawn_items_for_sale"/>
        </record>
		<menuitem name="Items For Sales" id="menu_pawn_items_for_sale" action="action_pawn_items_for_sale" sequence="10"
		    parent="menu_pawn_for_sale"
			groups="group_pawn_manager,group_pawn_stock,group_pawn_accountant,group_pawn_officer"/>

        <!-- Item for Sales (borrowed) -->
        <record id="action_pawn_items_borrowed" model="ir.actions.act_window">
            <field name="name">Items Borrowed</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{'tree_view_type': 'pawn_item', 'hide_action_model': ['pawn.asset.to.for.sale', 'pawn.item.to.borrowed']}</field>
            <field name="domain">[('type','=','consu'), ('state','=','for_sale'), ('location_status.code','=','item_borrowed')]</field>
            <field name="view_id" ref="pawn_item_tree_view"/>
            <field name="search_view_id" ref="pawn_item_search_form_view"/>
        </record>
		<record id="action_pawn_items_borrowed_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="pawn_item_tree_view"/>
            <field name="act_window_id" ref="action_pawn_items_borrowed"/>
        </record>
        <record id="action_pawn_items_borrowed_view2" model="ir.actions.act_window.view" >
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="pawn_item_normal_form_view"/>
            <field name="act_window_id" ref="action_pawn_items_borrowed"/>
        </record>
		<menuitem name="Items Borrowed" id="menu_pawn_items_borrowed" action="action_pawn_items_borrowed" sequence="20"
		    parent="menu_pawn_for_sale"
			groups="group_pawn_accountant,group_pawn_manager,group_pawn_officer,group_pawn_stock"/>

        <!-- Sales Voucher -->view_voucher_tree
        <record id="view_voucher_filter_sale_ext" model="ir.ui.view">
            <field name="name">view.voucher.filter.sale.ext</field>
            <field name="model">account.voucher</field>
            <field name="inherit_id" ref="account_voucher.view_voucher_filter_sale"/>
            <field name="arch" type="xml">
                <data>
                	<xpath expr="/search/field[@name='number']" position="before">
                    	<filter string="Receipt" domain="[('is_refund','!=',True)]" help="Sales Receipt"/>
                    	<filter string="Refund" domain="[('is_refund','=',True)]" help="Sales Refund"/>
                	    <separator/>
                	</xpath>
                	<xpath expr="/search/group" position="inside">
                        <filter string="Shop" domain="[]" context="{'group_by':'pawn_shop_id'}"/>
                        <filter string="product_journal_id" domain="[]" context="{'group_by':'product_journal_id'}"/>
	                </xpath>
	            </data>
	         </field>
	    </record>
        <record id="view_voucher_tree_ext" model="ir.ui.view">
            <field name="name">view.voucher.tree.ext</field>
            <field name="model">account.voucher</field>
            <field name="inherit_id" ref="account_voucher.view_voucher_tree"/>
            <field name="arch" type="xml">
                <data>
                	<field name="number" position="after" >
                		<field name="is_refund" />
                	</field>
	            </data>
	         </field>
	    </record>

        <record id="action_sale_receipt" model="ir.actions.act_window">
            <field name="name">Sales Receipts</field>
            <field name="res_model">account.voucher</field>
            <field name="view_type">form</field>
            <field name="domain">[('journal_id.type','in',['sale','sale_refund']), ('type','=','sale')]</field>
            <field name="context">{'default_type': 'sale', 'type': 'sale', 'default_pawnshop': 1 }</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="account_voucher.view_voucher_filter_sale"/>
            <field name="target">current</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a sale receipt.
              </p><p>
                When the sale receipt is confirmed, you can record the customer
                payment related to this sales receipt.
              </p>
            </field>
        </record>
        <record id="action_sale_receipt_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_sale_receipt"/>
        </record>
        <record id="action_sale_receipt_form" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="account_voucher.view_sale_receipt_form"/>
            <field name="act_window_id" ref="action_sale_receipt"/>
        </record>

		<menuitem action="action_sale_receipt" id="menu_action_sale_receipt" parent="menu_pawn_for_sale"  sequence="30"
			groups="group_pawn_accountant,group_pawn_manager,group_pawn_officer"/>

        <!-- Item for Sales (borrowed) -->
        <record id="action_pawn_items_sold" model="ir.actions.act_window">
            <field name="name">Items Sold</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{'tree_view_type': 'pawn_item','hide_action_model': ['pawn.asset.to.for.sale', 'pawn.item.to.borrowed', 'pawn.item.to.for.sale', 'pawn.item.create.receipt']}</field>
            <field name="domain">[('type','=','consu'), ('state','=','for_sale'), ('location_status.code','=','item_sold')]</field>
            <field name="view_id" ref="pawn_item_sold_tree_view"/>
            <field name="search_view_id" ref="pawn_item_search_form_view"/>
        </record>
		<record id="action_pawn_items_sold_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="pawn_item_sold_tree_view"/>
            <field name="act_window_id" ref="action_pawn_items_sold"/>
        </record>
        <record id="action_pawn_items_sold_view2" model="ir.actions.act_window.view" >
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="pawn_item_normal_form_view"/>
            <field name="act_window_id" ref="action_pawn_items_sold"/>
        </record>
		<menuitem name="Items Sold" id="menu_pawn_items_sold" action="action_pawn_items_sold" sequence="40"
		    parent="menu_pawn_for_sale"
			groups="group_pawn_manager,group_pawn_stock,group_pawn_accountant,group_pawn_officer"/>

		<!-- Ticket Move -->
        <record id="action_asset_move_kanban" model="ir.actions.act_window">
            <field name="name">Incoming Ticket</field>
            <field name="res_model">product.product</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban</field>
            <field name="domain">[('type','=','pawn_asset'), ('state','!=','draft'),('location_status.code','in',('asset_incoming', 'asset_stock'))]</field>
            <field name="context">{'location_status': ['asset_incoming', 'asset_stock']}</field>
            <field name="search_view_id" ref="pawn_item_search_form_view"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to define a new Pawn Ticket.
              </p>
            </field>
        </record>
        <record id="action_asset_move_kanban_view" model="ir.actions.act_window.view" >
            <field name="sequence" eval="1"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="pawn_asset_move_kanban_view"/>
            <field name="act_window_id" ref="action_asset_move_kanban"/>
        </record>
        <menuitem action="action_asset_move_kanban" id="menu_action_asset_move_kanban" parent="menu_pawn_management" sequence="2"
        	groups="group_pawn_accountant,group_pawn_manager,group_pawn_stock"/>


        <record id="action_asset_move_out_kanban" model="ir.actions.act_window">
            <field name="name">Outgoing Ticket</field>
            <field name="res_model">product.product</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban</field>
            <field name="domain">[('type','=','pawn_asset'), ('state','!=','draft'), ('location_status.code','in',('asset_outgoing', 'asset_returned'))]</field>
            <field name="context">{'location_status': ['asset_outgoing', 'asset_returned']}</field>
            <field name="search_view_id" ref="pawn_item_search_form_view"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to define a new Pawn Ticket.
              </p>
            </field>
        </record>
        <record id="action_asset_move_out_kanban_view" model="ir.actions.act_window.view" >
            <field name="sequence" eval="1"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="pawn_asset_move_kanban_view"/>
            <field name="act_window_id" ref="action_asset_move_out_kanban"/>
        </record>
        <menuitem action="action_asset_move_out_kanban" id="menu_action_asset_move_out_kanban" parent="menu_pawn_management" sequence="3"
        	groups="group_pawn_accountant,group_pawn_manager,group_pawn_stock"/>

        <!-- Expired Tickets -->
        <record id="action_pawn_asset_expired" model="ir.actions.act_window">
            <field name="name">Grace Ended Tickets</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{'tree_view_type': 'pawn_asset', 'hide_action_model': ['pawn.item.to.borrowed', 'pawn.item.to.for.sale', 'pawn.item.create.receipt']}</field>
            <field name="domain">[('type','=','pawn_asset'), ('state','=','expire')]</field>
            <field name="view_id" ref="pawn_item_tree_view"/>
            <field name="search_view_id" ref="pawn_item_search_form_view"/>
        </record>
        <record id="action_pawn_asset_expired_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="pawn_item_tree_view"/>
            <field name="act_window_id" ref="action_pawn_asset_expired"/>
        </record>
        <record id="action_pawn_asset_expired_view2" model="ir.actions.act_window.view" >
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="pawn_item_normal_form_view"/>
            <field name="act_window_id" ref="action_pawn_asset_expired"/>
        </record>
		<menuitem name="Grace Ended Tickets" id="menu_pawn_asset_expired" action="action_pawn_asset_expired" sequence="2"
		    parent="menu_pawn_for_sale"
			groups="group_pawn_manager,group_pawn_stock,group_pawn_accountant,group_pawn_officer"/>

		 <!-- Unit of Measure -->
        <menuitem action="product.product_uom_form_action" id="pawnshop.menu_product_uom_form_action" parent="pawnshop.menu_pawn_master" sequence="110"
        	groups="group_pawn_accountant"/>

		<!-- Update Product Form View -->
        <record id="view_product_hr_expense_form_ext" model="ir.ui.view">
            <field name="name">product.product.expense.form.ext</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="hr_expense.view_product_hr_expense_form"/>
            <field name="arch" type="xml">
            	<field name="hr_expense_ok" position="attributes">
                    <attribute name="on_change">onchange_hr_expense_ok(hr_expense_ok)</attribute>
            	</field>
            </field>
        </record>
    </data>
</openerp>
